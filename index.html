<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Protect Training & Diet</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <header class="header">
      <h1 class="logo">Protect</h1>
      <nav class="tabs">
        <button type="button" class="tab active" data-tab="treino">Treino</button>
        <button type="button" class="tab" data-tab="dieta">Dieta</button>
      </nav>
    </header>

    <main class="content">

      <!-- ===== ABA TREINO ===== -->
      <section id="treino" class="tab-panel active">

        <!-- TREINO ATIVO (oculto por padr√£o) -->
        <div id="active-workout-panel" class="panel-card hidden">
          <div class="workout-top-bar">
            <input id="workout-title-input" type="text" class="workout-title-input" placeholder="Nome do treino">
            <span id="workout-timer" class="workout-timer">00:00</span>
          </div>
          <div id="workout-exercises-list"></div>
          <button type="button" id="add-exercise-btn" class="btn-outline btn-block">+ Adicionar exerc√≠cio</button>
          <div class="workout-footer-btns">
            <button type="button" id="discard-workout-btn" class="btn-danger">Descartar</button>
            <button type="button" id="finish-workout-btn" class="btn-success">Finalizar treino</button>
          </div>
        </div>

        <!-- INICIAR TREINO (vis√≠vel por padr√£o) -->
        <div id="start-workout-card" class="panel-card start-card">
          <div class="start-card-body">
            <div class="start-icon">üí™</div>
            <h2>Pronto para treinar?</h2>
            <p>Registre exerc√≠cios e s√©ries em tempo real.</p>
            <button type="button" id="start-workout-btn" class="btn-primary btn-lg">Iniciar treino</button>
          </div>
        </div>

        <!-- TREINOS RECENTES -->
        <div class="panel-card">
          <div class="card-header">
            <h2>Treinos recentes</h2>
            <button type="button" id="refresh-workouts-btn" class="btn-icon" title="Carregar">&#x21BA;</button>
          </div>
          <div id="workouts-list" class="list">
            <p class="empty">Clique em &#x21BA; para carregar treinos do Hevy.</p>
          </div>
        </div>

        <!-- ROTINAS -->
        <div class="panel-card">
          <div class="card-header">
            <h2>Rotinas</h2>
            <button type="button" id="refresh-routines-btn" class="btn-icon" title="Carregar">&#x21BA;</button>
          </div>
          <div id="routines-list" class="list">
            <p class="empty">Clique em &#x21BA; para carregar rotinas.</p>
          </div>
        </div>
      </section>

      <!-- ===== ABA DIETA ===== -->
      <section id="dieta" class="tab-panel">

        <!-- BUSCA DE ALIMENTOS -->
        <div class="panel-card">
          <h2>Buscar alimento</h2>
          <div class="search-row">
            <input type="text" id="food-search-input" placeholder="Ex: frango grelhado, ovo, arroz...">
            <button type="button" id="food-search-btn">Buscar</button>
          </div>
          <div id="food-results"></div>
        </div>

        <!-- DI√ÅRIO ALIMENTAR -->
        <div class="panel-card">
          <div class="card-header">
            <h2>Di√°rio alimentar</h2>
            <input type="date" id="diary-date-input">
          </div>
          <div id="macro-totals" class="macro-totals hidden">
            <div class="macro-item">
              <span class="macro-value" id="total-kcal">0</span>
              <span class="macro-label">kcal</span>
            </div>
            <div class="macro-divider"></div>
            <div class="macro-item">
              <span class="macro-value" id="total-protein">0g</span>
              <span class="macro-label">prote√≠na</span>
            </div>
            <div class="macro-item">
              <span class="macro-value" id="total-carbs">0g</span>
              <span class="macro-label">carbs</span>
            </div>
            <div class="macro-item">
              <span class="macro-value" id="total-fat">0g</span>
              <span class="macro-label">gordura</span>
            </div>
          </div>
          <div id="diary-list" class="list">
            <p class="empty">Nenhuma refei√ß√£o registrada. Busque um alimento acima.</p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- ===== MODAL: BUSCA DE EXERC√çCIO ===== -->
  <div id="exercise-modal" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <h3>Adicionar exerc√≠cio</h3>
        <button type="button" class="modal-close" id="close-exercise-modal">&#x2715;</button>
      </div>
      <div class="modal-body">
        <input type="text" id="exercise-search-input" placeholder="Buscar exerc√≠cio...">
        <div id="exercise-results" class="modal-list"></div>
      </div>
    </div>
  </div>

  <!-- ===== MODAL: ADICIONAR ALIMENTO ===== -->
  <div id="add-food-modal" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <h3 id="add-food-modal-title">Adicionar ao di√°rio</h3>
        <button type="button" class="modal-close" id="close-food-modal">&#x2715;</button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <label>Refei√ß√£o</label>
          <select id="add-food-meal-type">
            <option value="cafe">Caf√© da manh√£</option>
            <option value="lanche_manha">Lanche manh√£</option>
            <option value="almoco">Almo√ßo</option>
            <option value="lanche_tarde">Lanche tarde</option>
            <option value="jantar">Jantar</option>
            <option value="ceia">Ceia</option>
          </select>
        </div>
        <div class="form-row">
          <label>Por√ß√£o</label>
          <select id="add-food-serving-select"></select>
        </div>
        <div class="form-row">
          <label>Quantidade</label>
          <input type="number" id="add-food-qty-input" value="1" min="0.1" step="0.1">
        </div>
        <div id="add-food-nutrition-preview" class="nutrition-preview"></div>
        <button type="button" id="confirm-add-food-btn" class="btn-primary btn-block">Adicionar ao di√°rio</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config.js"></script>
  <script src="script.js"></script>
</body>
</html>
