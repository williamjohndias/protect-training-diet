:root {
  --bg: #0f0f12;
  --surface: #1a1a1f;
  --surface2: #222228;
  --border: #2d2d35;
  --text: #e8e8ed;
  --muted: #8888a0;
  --accent: #6366f1;
  --accent-h: #818cf8;
  --green: #22c55e;
  --red: #ef4444;
  --yellow: #f59e0b;
  --radius: 12px;
  --r-sm: 8px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'DM Sans', system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  line-height: 1.5;
  font-size: 15px;
}

.app { max-width: 680px; margin: 0 auto; padding: 1rem 1rem 3rem; }

/* ---- HEADER ---- */
.header { margin-bottom: 1.25rem; }
.logo { font-size: 1.35rem; font-weight: 700; letter-spacing: -.03em; margin-bottom: .85rem; }

.tabs { display: flex; gap: .25rem; background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: .25rem; }
.tab { flex: 1; padding: .55rem; border: none; border-radius: var(--r-sm); background: transparent; color: var(--muted); font-family: inherit; font-size: .9rem; font-weight: 500; cursor: pointer; transition: all .15s; }
.tab:hover { color: var(--text); }
.tab.active { background: var(--accent); color: #fff; }

/* ---- PANEL ---- */
.tab-panel { display: none; }
.tab-panel.active { display: block; animation: fadein .18s ease; }
@keyframes fadein { from { opacity:0 } to { opacity:1 } }

.panel-card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 1.1rem; margin-bottom: .85rem; }
.panel-card h2 { font-size: 1rem; font-weight: 600; margin-bottom: .85rem; }

.card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: .85rem; }
.card-header h2 { margin: 0; }

/* ---- BUTTONS ---- */
button { font-family: inherit; cursor: pointer; border: none; border-radius: var(--r-sm); transition: background .15s, opacity .15s; }
.btn-primary { background: var(--accent); color: #fff; padding: .6rem 1.1rem; font-size: .9rem; font-weight: 500; }
.btn-primary:hover { background: var(--accent-h); }
.btn-success { background: var(--green); color: #fff; padding: .6rem 1.1rem; font-size: .9rem; font-weight: 600; }
.btn-success:hover { opacity: .88; }
.btn-danger { background: #2a1515; color: var(--red); padding: .6rem 1.1rem; font-size: .9rem; font-weight: 500; border: 1px solid #3d1919; }
.btn-danger:hover { background: var(--red); color: #fff; }
.btn-outline { background: transparent; color: var(--accent); border: 1px solid var(--accent); padding: .6rem 1rem; font-size: .875rem; font-weight: 500; }
.btn-outline:hover { background: rgba(99,102,241,.1); }
.btn-block { width: 100%; margin-top: .75rem; }
.btn-lg { padding: .75rem 2rem; font-size: 1rem; }
.btn-icon { background: var(--surface2); color: var(--muted); width: 32px; height: 32px; border-radius: 8px; font-size: 1.1rem; display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; }
.btn-icon:hover { color: var(--text); }
.btn-sm { padding: .3rem .65rem; font-size: .8rem; }
button:disabled { opacity: .45; cursor: not-allowed; }

/* ---- INPUTS ---- */
input[type=text], input[type=number], input[type=date], input[type=password], select, textarea {
  width: 100%; padding: .55rem .75rem; border: 1px solid var(--border); border-radius: var(--r-sm);
  background: var(--bg); color: var(--text); font-family: inherit; font-size: .9rem;
}
input:focus, select:focus, textarea:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 2px rgba(99,102,241,.18); }
textarea { resize: vertical; }

.form-row { margin-bottom: .85rem; }
.form-row label { display: block; font-size: .8rem; font-weight: 500; color: var(--muted); margin-bottom: .3rem; }

.search-row { display: flex; gap: .5rem; }
.search-row input { flex: 1; }
.search-row button { flex-shrink: 0; background: var(--accent); color: #fff; padding: .55rem 1rem; font-size: .875rem; font-weight: 500; }
.search-row button:hover { background: var(--accent-h); }

/* ---- LIST / EMPTY ---- */
.list { min-height: 48px; }
.empty { color: var(--muted); font-size: .875rem; }
.loading-msg { color: var(--muted); font-size: .875rem; }
.error-msg { color: var(--red); font-size: .875rem; }

/* ---- START CARD ---- */
.start-card .start-card-body { text-align: center; padding: 1.25rem .5rem; }
.start-icon { font-size: 2.5rem; margin-bottom: .75rem; }
.start-card h2 { font-size: 1.1rem; margin-bottom: .35rem; }
.start-card p { color: var(--muted); font-size: .875rem; margin-bottom: 1.25rem; }

/* ---- WORKOUT ACTIVE PANEL ---- */
.workout-top-bar { display: flex; align-items: center; gap: .75rem; margin-bottom: 1rem; }
.workout-title-input { flex: 1; font-size: 1rem; font-weight: 600; border-color: transparent; background: var(--surface2); }
.workout-title-input:focus { border-color: var(--accent); }
.workout-timer { font-size: 1.1rem; font-weight: 700; color: var(--accent); white-space: nowrap; flex-shrink: 0; }

.workout-footer-btns { display: flex; gap: .5rem; margin-top: .85rem; }
.workout-footer-btns button { flex: 1; }

/* ---- EXERCISE CARD (dentro do treino ativo) ---- */
.exercise-card { background: var(--bg); border: 1px solid var(--border); border-radius: var(--r-sm); margin-bottom: .75rem; overflow: hidden; }
.exercise-card-header { display: flex; align-items: center; gap: .5rem; padding: .65rem .75rem; border-bottom: 1px solid var(--border); }
.ex-name-block { flex: 1; min-width: 0; }
.exercise-card-header .ex-name { font-weight: 600; font-size: .9rem; display: block; }
.ex-name-en { font-size: .75rem; color: var(--muted); display: block; }
.ex-last-session { font-size: .72rem; color: #a5b4fc; display: block; margin-top: .1rem; }
.ex-last-none { color: var(--muted); }
.exercise-card-header .ex-muscle { font-size: .75rem; color: var(--muted); background: var(--surface2); padding: .2rem .55rem; border-radius: 20px; }
.exercise-card-header .ex-delete { background: transparent; color: var(--muted); font-size: .9rem; padding: .2rem .4rem; }
.exercise-card-header .ex-delete:hover { color: var(--red); }

.exercise-notes { margin: .5rem .75rem; }
.exercise-notes textarea { font-size: .82rem; padding: .4rem .55rem; min-height: 42px; }

/* Sets table */
.sets-table { width: 100%; border-collapse: collapse; }
.sets-table th { font-size: .72rem; font-weight: 500; color: var(--muted); text-align: center; padding: .3rem .25rem; border-bottom: 1px solid var(--border); }
.sets-table th:first-child { text-align: left; padding-left: .75rem; }
.sets-table td { padding: .35rem .25rem; text-align: center; vertical-align: middle; }
.sets-table td:first-child { padding-left: .75rem; text-align: left; }
.sets-table tr:not(:last-child) td { border-bottom: 1px solid var(--border); }
.sets-table tr.set-completed td { opacity: .55; }
.sets-table tr.set-completed td:first-child .set-num { color: var(--green); }

.set-num { font-size: .82rem; font-weight: 600; color: var(--muted); width: 22px; display: inline-block; }
.set-type-select { width: 76px; padding: .3rem .35rem; font-size: .78rem; background: var(--surface2); border: 1px solid var(--border); }
.set-input { width: 58px; padding: .3rem; font-size: .875rem; font-weight: 500; text-align: center; background: var(--surface2); border: 1px solid var(--border); }
.set-input:focus { border-color: var(--accent); }
.set-complete-btn { background: var(--surface2); color: var(--muted); width: 30px; height: 30px; border-radius: 6px; font-size: .875rem; display: inline-flex; align-items: center; justify-content: center; }
.set-complete-btn:hover, .set-complete-btn.done { background: var(--green); color: #fff; }
.set-delete-btn { background: transparent; color: var(--muted); font-size: .82rem; padding: .2rem .3rem; }
.set-delete-btn:hover { color: var(--red); }

.add-set-row { padding: .5rem .75rem; }
.add-set-btn { background: transparent; color: var(--muted); font-size: .8rem; font-weight: 500; padding: .25rem 0; }
.add-set-btn:hover { color: var(--text); }

/* ---- RECENT WORKOUTS / ROUTINES ---- */
.workout-item, .routine-item { background: var(--bg); border: 1px solid var(--border); border-radius: var(--r-sm); padding: .75rem; margin-bottom: .6rem; }
.workout-item h3, .routine-item h3 { font-size: .9rem; font-weight: 600; margin-bottom: .25rem; }
.workout-item .meta, .routine-item .meta { font-size: .78rem; color: var(--muted); }
.workout-item .ex-list { font-size: .8rem; color: var(--muted); margin-top: .35rem; }

/* ---- FOOD RESULTS ---- */
.food-results { margin-top: .75rem; }
.food-card { background: var(--bg); border: 1px solid var(--border); border-radius: var(--r-sm); padding: .7rem .85rem; margin-bottom: .5rem; display: flex; align-items: center; gap: .75rem; }
.food-card-info { flex: 1; min-width: 0; }
.food-card-name { font-size: .88rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.food-card-sub { font-size: .75rem; color: var(--muted); }
.food-card-kcal { font-size: .78rem; color: var(--accent); font-weight: 600; white-space: nowrap; }
.food-add-btn { background: var(--accent); color: #fff; width: 30px; height: 30px; border-radius: 50%; font-size: 1.15rem; display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; }
.food-add-btn:hover { background: var(--accent-h); }

/* ---- MACRO TOTALS ---- */
.macro-totals { display: flex; align-items: center; gap: .25rem; background: var(--bg); border: 1px solid var(--border); border-radius: var(--r-sm); padding: .65rem .85rem; margin-bottom: .85rem; }
.macro-item { flex: 1; text-align: center; }
.macro-value { display: block; font-size: 1rem; font-weight: 700; color: var(--text); }
.macro-label { font-size: .72rem; color: var(--muted); }
.macro-divider { width: 1px; height: 32px; background: var(--border); flex-shrink: 0; }
.macro-item:first-child .macro-value { color: var(--accent); }

/* ---- DIARY ---- */
.diary-meal-group { margin-bottom: .85rem; }
.diary-meal-title { font-size: .78rem; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: .06em; margin-bottom: .4rem; }
.diary-entry { background: var(--bg); border: 1px solid var(--border); border-radius: var(--r-sm); padding: .6rem .75rem; margin-bottom: .35rem; display: flex; align-items: center; gap: .5rem; }
.diary-entry-info { flex: 1; min-width: 0; }
.diary-entry-name { font-size: .875rem; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.diary-entry-sub { font-size: .75rem; color: var(--muted); }
.diary-entry-kcal { font-size: .8rem; color: var(--accent); font-weight: 600; white-space: nowrap; flex-shrink: 0; }
.diary-delete-btn { background: transparent; color: var(--muted); font-size: .82rem; padding: .2rem .3rem; flex-shrink: 0; }
.diary-delete-btn:hover { color: var(--red); }

/* ---- MODALS ---- */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.7); display: flex; align-items: flex-end; justify-content: center; z-index: 100; padding: 0; }
@media (min-width: 480px) { .modal-overlay { align-items: center; padding: 1rem; } }
.modal { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius) var(--radius) 0 0; width: 100%; max-width: 560px; max-height: 88vh; display: flex; flex-direction: column; }
@media (min-width: 480px) { .modal { border-radius: var(--radius); } }
.modal-header { display: flex; align-items: center; justify-content: space-between; padding: 1rem 1.1rem .75rem; border-bottom: 1px solid var(--border); flex-shrink: 0; }
.modal-header h3 { font-size: .95rem; font-weight: 600; margin: 0; }
.modal-close { background: var(--surface2); color: var(--muted); width: 28px; height: 28px; border-radius: 6px; font-size: .8rem; display: inline-flex; align-items: center; justify-content: center; }
.modal-close:hover { color: var(--text); }
.modal-body { padding: .85rem 1.1rem 1.1rem; overflow-y: auto; }
.modal-body input[type=text] { margin-bottom: .75rem; }
.modal-list { margin-top: .5rem; max-height: 50vh; overflow-y: auto; }
.exercise-result-item { display: flex; align-items: center; gap: .5rem; padding: .65rem .5rem; border-radius: var(--r-sm); cursor: pointer; transition: background .1s; }
.exercise-result-item:hover { background: var(--surface2); }
.exercise-result-item .er-name { flex: 1; font-size: .88rem; font-weight: 500; }
.exercise-result-item .er-muscle { font-size: .75rem; color: var(--muted); background: var(--bg); padding: .18rem .5rem; border-radius: 20px; }
.exercise-result-item .er-add { background: var(--accent); color: #fff; font-size: .75rem; font-weight: 600; padding: .3rem .65rem; border-radius: 6px; }

/* Nutrition preview */
.nutrition-preview { display: grid; grid-template-columns: repeat(4, 1fr); gap: .5rem; background: var(--bg); border: 1px solid var(--border); border-radius: var(--r-sm); padding: .65rem; margin-bottom: .85rem; text-align: center; }
.np-item .np-value { font-size: .95rem; font-weight: 700; color: var(--text); }
.np-item:first-child .np-value { color: var(--accent); }
.np-item .np-label { font-size: .72rem; color: var(--muted); }

/* ---- BOTÃO CRIAR NO HEVY ---- */
.btn-hevy { background: #1a1a2e; color: #a5b4fc; border: 1px solid #3b3b6b; padding: .4rem .85rem; font-size: .82rem; font-weight: 600; border-radius: 8px; }
.btn-hevy:hover { background: var(--accent); color: #fff; border-color: var(--accent); }
.hevy-routines-status { font-size: .82rem; margin-bottom: .75rem; padding: .5rem .75rem; border-radius: 8px; }
.hevy-routines-status.info { background: #1a1a2e; color: #a5b4fc; }
.hevy-routines-status.ok   { background: #0f2a1a; color: var(--green); }
.hevy-routines-status.warn { background: #2a1a0f; color: var(--yellow); }

/* ---- EVOLUÇÃO & PROJEÇÃO ---- */
.evo-block { margin-bottom: 1.25rem; }
.evo-block:last-child { margin-bottom: 0; }
.evo-block-title { font-size: .8rem; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: .05em; margin-bottom: .6rem; }
.evo-block select { margin-bottom: .75rem; }

#evo-chart-wrap { background: var(--bg); border: 1px solid var(--border); border-radius: var(--r-sm); padding: .75rem; margin-top: .5rem; }

/* Tabela de projeção */
.proj-table { width: 100%; border-collapse: collapse; font-size: .82rem; }
.proj-table thead th { font-size: .72rem; font-weight: 600; color: var(--muted); text-align: left; padding: .35rem .5rem; border-bottom: 1px solid var(--border); }
.proj-table tbody td { padding: .45rem .5rem; border-bottom: 1px solid var(--border); vertical-align: middle; }
.proj-table tbody tr:last-child td { border-bottom: none; }
.proj-name { font-weight: 500; }
.proj-last { color: var(--muted); }
.proj-next { font-weight: 700; }
.proj-up   { color: var(--green); }
.proj-same { color: var(--text); }
.proj-range { color: var(--muted); font-size: .75rem; white-space: nowrap; }
.proj-na  { color: var(--muted); font-style: italic; }

/* ---- MINHA ROTINA ---- */
.routine-days-grid { display: grid; grid-template-columns: 1fr 1fr; gap: .65rem; }
@media (max-width: 480px) { .routine-days-grid { grid-template-columns: 1fr; } }

.rday-card { background: var(--bg); border: 1px solid var(--border); border-top: 3px solid var(--day-color, var(--accent)); border-radius: var(--r-sm); overflow: hidden; }
.rday-header { display: flex; align-items: center; gap: .5rem; padding: .65rem .75rem .5rem; }
.rday-badge { font-size: .78rem; font-weight: 700; color: #fff; background: var(--day-color, var(--accent)); padding: .18rem .55rem; border-radius: 20px; flex-shrink: 0; }
.rday-name { flex: 1; font-size: .85rem; font-weight: 600; }
.rday-count { font-size: .75rem; color: var(--muted); flex-shrink: 0; }

.rday-exercises { padding: .25rem .75rem .5rem; }
.rday-group-name { font-size: .72rem; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: .05em; margin: .5rem 0 .25rem; }
.rday-ex { display: flex; justify-content: space-between; align-items: center; padding: .18rem 0; font-size: .82rem; border-bottom: 1px solid var(--border); }
.rday-ex:last-child { border-bottom: none; }
.rday-ex-name { color: var(--text); }
.rday-ex-sets { font-size: .75rem; color: var(--muted); white-space: nowrap; margin-left: .5rem; }

.rday-footer { display: flex; gap: .4rem; padding: .5rem .65rem; border-top: 1px solid var(--border); background: var(--surface2); }
.rday-toggle-btn { flex: 1; background: transparent; color: var(--muted); font-size: .78rem; padding: .3rem; }
.rday-toggle-btn:hover { color: var(--text); }
.rday-start-btn { background: var(--day-color, var(--accent)); color: #fff; font-size: .8rem; font-weight: 600; padding: .35rem .75rem; border-radius: 6px; }
.rday-start-btn:hover { opacity: .88; }

/* ---- REFERÊNCIA DE ROTINA (no treino ativo) ---- */
.routine-ref-panel { background: var(--bg); border: 1px solid var(--border); border-radius: var(--r-sm); padding: .65rem .75rem; margin-bottom: .75rem; }
.routine-ref-header { font-size: .8rem; font-weight: 600; color: var(--muted); margin-bottom: .5rem; }
.rref-group { margin-bottom: .5rem; }
.rref-group-name { font-size: .72rem; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: .04em; margin-bottom: .2rem; }
.rref-ex { display: flex; justify-content: space-between; font-size: .8rem; padding: .15rem 0; border-bottom: 1px solid var(--border); }
.rref-ex:last-child { border-bottom: none; }
.rref-sets { color: var(--muted); font-size: .75rem; }

/* ---- UTILITIES ---- */
.hidden { display: none !important; }
